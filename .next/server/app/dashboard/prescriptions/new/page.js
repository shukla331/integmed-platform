(()=>{var e={};e.id=780,e.ids=[780],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>h,tree:()=>d});var r=s(482),i=s(9108),a=s(2563),n=s.n(a),c=s(8300),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["prescriptions",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4178)),"C:\\Users\\user\\Desktop\\project medfile\\integmed-frontend\\app\\dashboard\\prescriptions\\new\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8062)),"C:\\Users\\user\\Desktop\\project medfile\\integmed-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\user\\Desktop\\project medfile\\integmed-frontend\\app\\dashboard\\prescriptions\\new\\page.tsx"],u="/dashboard/prescriptions/new/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/prescriptions/new/page",pathname:"/dashboard/prescriptions/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8342:(e,t,s)=>{Promise.resolve().then(s.bind(s,2645))},313:(e,t,s)=>{Promise.resolve().then(s.bind(s,4332))},6447:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},2645:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5344),i=s(3729),a=s(8428),n=s(8117);function c(){let e=(0,a.useRouter)(),[t,s]=(0,i.useState)(""),[c,o]=(0,i.useState)([]),[d,l]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null),m=async e=>{if(e.preventDefault(),t.trim()){p(!0);try{let e=await n.Z.expandShorthand(t);o([...c,e]),s(""),await g([...c,e])}catch(e){alert(e.response?.data?.detail||"Failed to expand shorthand")}finally{p(!1)}}},g=async e=>{try{let t=await n.Z.checkInteractions({medications:e});x(t)}catch(e){console.error("Failed to check interactions:",e)}},y=e=>{let t=c.filter((t,s)=>s!==e);o(t),t.length>0?g(t):x(null)},f=async()=>{l(!0);try{let t=await n.Z.createPrescription({encounter_id:"temp-encounter-id",medications:c});await n.Z.signPrescription(t.id),alert("Prescription created and signed successfully!"),e.push("/dashboard")}catch(e){alert(e.response?.data?.detail||"Failed to create prescription")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white border-b border-gray-200",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-primary-900",children:"New Prescription"}),r.jsx("button",{onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-900",children:"← Back"})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Medication"}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:'Type shorthand (e.g., "Metf 1000 bd 30d")',className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono"}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:'\uD83D\uDCA1 Tip: "Metf 1000 bd 30d" = Metformin 1000mg, twice daily, 30 days'})]}),r.jsx("button",{type:"submit",disabled:u||!t.trim(),className:"w-full bg-primary-500 text-white py-3 rounded-lg font-medium hover:bg-primary-700 transition disabled:opacity-50",children:u?"Expanding...":"Add Medication"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Medications (",c.length,")"]}),0===c.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[r.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDC8A"}),r.jsx("p",{children:"No medications added yet"})]}):r.jsx("div",{className:"space-y-4",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-primary-300",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs text-primary-600 font-semibold mb-1",children:e.generic_name}),(0,r.jsxs)("div",{className:"font-medium",children:[e.brand_suggestions?.[0]||"Generic"," ",e.strength]})]}),r.jsx("button",{onClick:()=>y(t),className:"text-red-500 hover:text-red-700",children:"✕"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm text-gray-600 mt-3",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Frequency:"})," ",e.frequency]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Duration:"})," ",e.duration_days," days"]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Quantity:"})," ",e.quantity]})]}),e.instructions&&(0,r.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:["\uD83D\uDCDD ",e.instructions]})]},t))})]}),c.length>0&&(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>o([]),className:"flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear All"}),r.jsx("button",{onClick:f,disabled:d,className:"flex-1 px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:d?"Creating...":"Sign & Create Prescription"})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:"\uD83D\uDEE1️ Safety HUD"}),h?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Safety Score"}),(0,r.jsxs)("div",{className:"text-3xl font-bold",children:[h.safety_score.toFixed(1),"/10"]}),r.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full mt-2",children:r.jsx("div",{className:`h-2 rounded-full ${h.safety_score>=8?"bg-green-500":h.safety_score>=6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${10*h.safety_score}%`}})})]}),h.interactions.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"⚠️ Interactions Found"}),h.interactions.map((e,t)=>(0,r.jsxs)("div",{className:`p-3 rounded-lg border-l-4 ${"severe"===e.severity?"bg-red-50 border-red-500":"moderate"===e.severity?"bg-yellow-50 border-yellow-500":"bg-blue-50 border-blue-500"}`,children:[(0,r.jsxs)("div",{className:"text-sm font-medium",children:[e.drug1," + ",e.drug2]}),r.jsx("div",{className:"text-xs mt-1",children:e.description}),(0,r.jsxs)("div",{className:"text-xs mt-2 font-medium",children:["\uD83D\uDCA1 ",e.recommendation]})]},t))]}),0===h.interactions.length&&0===h.contraindications.length&&0===h.allergy_alerts.length&&(0,r.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:[r.jsx("div",{className:"text-sm font-medium text-green-800",children:"✓ No interactions detected"}),r.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Safe to prescribe"})]})]}):r.jsx("div",{className:"text-center py-4 text-gray-400",children:r.jsx("p",{className:"text-sm",children:"Add medications to check interactions"})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"✓ NMC Compliance"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:"✓"}),r.jsx("span",{children:"Generic names in CAPITALS"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:"✓"}),r.jsx("span",{children:"Generic-first prescription"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-500",children:"✓"}),r.jsx("span",{children:"Digital signature ready"})]})]})]})]})]})})]})}},4332:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Providers:()=>o});var r=s(5344),i=s(6165),a=s(6274),n=s(3729),c=s(1453);function o({children:e}){let[t]=(0,n.useState)(()=>new i.S({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}})),s=(0,c.t)(e=>e.checkAuth);return(0,n.useEffect)(()=>{s()},[s]),r.jsx(a.aH,{client:t,children:e})}},8117:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var r=s(1934),i=s(8014);let a="http://localhost:8000";class n{constructor(){this.client=r.Z.create({baseURL:`${a}/api/v1`,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{let t=i.Z.get("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{if(e.response?.status===401){let t=i.Z.get("refresh_token");if(t)try{let{access_token:s}=(await r.Z.post(`${a}/api/v1/auth/refresh`,{refresh_token:t})).data;if(i.Z.set("access_token",s),e.config)return e.config.headers.Authorization=`Bearer ${s}`,this.client.request(e.config)}catch(e){i.Z.remove("access_token"),i.Z.remove("refresh_token"),window.location.href="/login"}else window.location.href="/login"}return Promise.reject(e)})}async initDoctorAuth(e){return(await this.client.post("/auth/doctor/init",{mobile:e,purpose:"login"})).data}async verifyDoctorAuth(e,t){let{access_token:s,refresh_token:r,user:a}=(await this.client.post("/auth/doctor/verify",{txn_id:e,otp:t})).data;return i.Z.set("access_token",s,{expires:1}),i.Z.set("refresh_token",r,{expires:7}),{user:a,access_token:s}}logout(){i.Z.remove("access_token"),i.Z.remove("refresh_token"),window.location.href="/login"}async getPatient(e){return(await this.client.get(`/patients/${e}`)).data}async createPatient(e){return(await this.client.post("/patients",e)).data}async createEncounter(e){return(await this.client.post("/encounters",e)).data}async updateEncounter(e,t){return(await this.client.patch(`/encounters/${e}`,t)).data}async expandShorthand(e){return(await this.client.post("/prescriptions/expand-shorthand",{shorthand:e})).data}async checkInteractions(e){return(await this.client.post("/prescriptions/check-interactions",e)).data}async createPrescription(e){return(await this.client.post("/prescriptions/draft",e)).data}async signPrescription(e){return(await this.client.post(`/prescriptions/${e}/sign`)).data}async getHealthTimeline(e,t){return(await this.client.get(`/clinical/health-graph/${e}`,{params:t})).data}async requestConsent(e){return(await this.client.post("/abdm/consent-requests/init",e)).data}}let c=new n},1453:(e,t,s)=>{"use strict";s.d(t,{t:()=>a});var r=s(3158),i=s(8014);let a=(0,r.Ue)(e=>({user:null,isAuthenticated:!1,isLoading:!0,setUser:t=>e({user:t,isAuthenticated:!!t,isLoading:!1}),setLoading:t=>e({isLoading:t}),logout:()=>{i.Z.remove("access_token"),i.Z.remove("refresh_token"),i.Z.remove("user"),e({user:null,isAuthenticated:!1})},checkAuth:()=>{let t=i.Z.get("access_token"),s=i.Z.get("user");if(t&&s)try{let t=JSON.parse(s);e({user:t,isAuthenticated:!0,isLoading:!1})}catch(t){e({user:null,isAuthenticated:!1,isLoading:!1})}else e({user:null,isAuthenticated:!1,isLoading:!1})}}))},4178:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`C:\Users\user\Desktop\project medfile\integmed-frontend\app\dashboard\prescriptions\new\page.tsx`),{__esModule:i,$$typeof:a}=r,n=r.default},8062:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,metadata:()=>u});var r=s(5036),i=s(265),a=s.n(i);s(7272);var n=s(6843);let c=(0,n.createProxy)(String.raw`C:\Users\user\Desktop\project medfile\integmed-frontend\app\providers.tsx`),{__esModule:o,$$typeof:d}=c;c.default;let l=(0,n.createProxy)(String.raw`C:\Users\user\Desktop\project medfile\integmed-frontend\app\providers.tsx#Providers`),u={title:"IntegMed - Integrated Healthcare Platform",description:"Bridging Allopathy and AYUSH for comprehensive patient care"};function p({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:a().className,children:r.jsx(l,{children:e})})})}},7272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[941,504],()=>s(384));module.exports=r})();